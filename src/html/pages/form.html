{#
vim: filetype=html
#}

{% extends "layouts/layout.html" %}
{% block content %}

{% set slides = [ "Programmation 1", "Syst√®mes D'exploitations 1", "Statistiques
et Probabilites", "Electromagnetisme", "Algorithmes 2", "Technologies du Web" ]
%}

<div class="page">
  <form id="form">
    <h1>Form</h1>
    <ul>
      {% for slide in slides %}
      <li>
        <label for="{{loop.index}}">{{slide}}</label>
        <input
          type="checkbox"
          id="{{loop.index}}"
          name="{{loop.index}}"
          value=""
        />
      </li>
      <br />
      {% endfor %}
      <button type="submit" id="submit" name="slide-submit">Submit</button>
    </ul>
  </form>
</div>
{% endblock %}

{% block scripts %}
<script>
  const form = document.querySelector("#form");

  function process_data() {
    const form_data = new FormData(form);
    let form_result = "FFFFFF".split('');
    for (const form_slide of form_data.keys()) {
      form_result[form_slide - 1] = "S";
    }
    localStorage.setItem("form_result", form_result.join(''));
    window.location = "/display.html";
  }

  form.addEventListener("submit", (event) => {
    event.preventDefault();
    process_data();
  });
</script>
{% endblock %}
